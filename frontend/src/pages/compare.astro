---
/**
 * Compare Countries page
 * Allows users to compare birth patterns across multiple countries.
 *
 * Uses a hybrid React + Svelte architecture:
 * - React: ComparePageClient handles controls, URL sync, and data loading
 * - Svelte: ComparePageHeatmaps renders the heatmaps for better performance
 * - Communication via nanostores
 */
import BaseLayout from '../layouts/BaseLayout.astro';
import { ComparePageClient } from '../components/ComparePageClient';
import ComparePageHeatmaps from '../components/svelte/ComparePageHeatmaps.svelte';
import countriesData from '../assets/data/countries.json';
import type { CountryMeta } from '../lib/types';

const countries = countriesData.countries as CountryMeta[];

// Use default OG image
const ogImageUrl = '/og/default.png';
---

<BaseLayout
  title="Compare Countries - Birth Heatmaps"
  description="Compare birth seasonality patterns across multiple countries side by side. Explore fertility rates, birth timing, and seasonal trends."
  canonicalPath="/compare"
  ogImage={ogImageUrl}
>
  <div class="py-lg relative z-0">
    <header class="mb-xl">
      <h1 class="m-0 mb-sm text-2xl font-bold text-text">Compare Countries</h1>
      <p class="m-0 text-base text-text-muted leading-normal max-w-[600px]">
        Select multiple countries to compare their birth patterns side by side.
        Toggle between unified and per-country color scales.
      </p>
    </header>

    <!-- React controls: country selection, metric tabs, scale toggle, share buttons -->
    <ComparePageClient client:load countries={countries} />

    <!-- Svelte heatmaps: reads from nanostores, renders heatmap stack -->
    <ComparePageHeatmaps client:load />
  </div>
</BaseLayout>
